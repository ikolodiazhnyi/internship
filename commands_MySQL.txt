CREATE DATABASE db_books;
USE db_books;
CREATE TABLE tbl_topics(topic_id INT CHECK(topic_id >= 0 AND topic_id <= 127), topic_name VARCHAR(100));


CREATE TABLE tbl_books(b_id VARCHAR(17) COMMENT 'ISBN book code');
ALTER TABLE tbl_books ADD COLUMN b_name VARCHAR(255) NOT NULL COMMENT 'Name of the book';
ALTER TABLE tbl_books ADD COLUMN b_author VARCHAR(255) COMMENT 'Author';
ALTER TABLE tbl_books ADD COLUMN b_topics INT COMMENT 'Code of the category which is connected with a certain book';
ALTER TABLE tbl_books ADD COLUMN b_price DECIMAL(10,2) COMMENT 'Price';


ALTER TABLE tbl_books ADD PRIMARY KEY (b_id);
ALTER TABLE tbl_topics ADD PRIMARY KEY (topic_id);
ALTER TABLE tbl_books
    -> ADD FOREIGN KEY (b_topics) REFERENCES tbl_topics(topic_id);
ALTER TABLE tbl_topics
    -> ADD UNIQUE INDEX unique_name(topic_name);


INSERT INTO tbl_topics VALUES(1,'Classic');
INSERT INTO tbl_topics VALUES(2,'Lyrics'),(3,'Memoirs');
INSERT INTO tbl_topics VALUES(4,'Psychology'),(5,'Philosophy');


INSERT INTO tbl_books VALUES('01','In Cold Blood', 'Truman Capote', 1, 122.30);
INSERT INTO tbl_books VALUES('02','The Anthology of Rap', 'Adam Bradley', 2, 92.45);
INSERT INTO tbl_books VALUES('03','The Social Animal', 'Elliot Aronson', 4, NULL);



UPDATE tbl_books SET b_price = b_price + (b_price * 10 / 100);
DELETE FROM tbl_books WHERE b_price IS NULL;


"C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqldump.exe" -h127.0.0.1 -uroot -p db_books > backups.sql

